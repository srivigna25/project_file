<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Users Form</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h3 {
            text-transform: uppercase;
            font-size: 15px;
        }
        input, select, button {
            padding: 8px;
            margin-top: 5px;
        }
        .other_category_wrapper {
            display: none;
        }
        .other_category_wrapper.show {
            display: block;
        }
    </style>

    <script>
        function toggleOtherCategory() {
            let categorySelect = document.getElementById("category");
            let otherCategoryDiv = document.getElementById("other_category_wrapper");

            if (categorySelect.value === "other") {
                otherCategoryDiv.style.display = "block";
            } else {
                otherCategoryDiv.style.display = "none";
            }
        }
    </script>
</head>
<body>
    <h3>Login form:</h3>
    <form action="${'/login' + str(user['id']) if user else '/login'}" method="post">
        <input type="text" id="email" name="email" placeholder="Enter your email" required><br><br>
        <input type="password" id="password" name="password" placeholder="Password" required><br><br>
        
        <label for="category">Category:</label>
        <div>If you don't see your category, please select "Other".</div>
        <select id="category" name="category" required onchange="toggleOtherCategory()">
            % for cat in categories:
                <option value="${cat['id']}" ${'selected' if user and cat['id'] == user['category'] else ''}>
                    ${cat['user_type']}
                </option>
            % endfor
            <option value="other">Other</option>
        </select><br><br>

        <div id="other_category_wrapper" class="other_category_wrapper">
            <input type="text" id="other_category" name="other_category" placeholder="Enter other category">
        </div>

        <button>Login</button>
    </form>
</body>
</html>
